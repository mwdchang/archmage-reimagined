## Battle

### Battle effects
Battle effects falls into three categories
- Prebattle: 
- Battle:
- Postbattle:


### Battle phase
- Apply dfender bonus
- Apply spells and items pre-battle effects
- Apply enchantments pre-battle effects
- Apply enchantments battle effects
- Apply unique items battle effects
- Apply spells and items battle effects 
- Resolve units abilities
- Calculate unit pairings in battle
- Calculate battle attack orderings
- Engagement
- Compute battle losses
- Calculate battle winner and loser
- Calculate enchantments post-battle effects
- Resolve land gain/loss
- Calculate damage dealt

